(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};window.MediaUploadService=Backbone.Collection.extend({uploadFile:function(c){var b,d;b=new FormData();b.append("file",c);d=new XMLHttpRequest();d.open("POST",uploadURL,true);d.upload.onprogress=a(function(g){var f;f=Math.round((g.position/g.total)*100);return this.trigger("progress",f)},this);d.onload=a(function(g){var f;if(g.currentTarget.status===200){f=$.parseJSON(g.currentTarget.response);if(f.name_conflict){return this.trigger("nameConflict",f)}else{return this.trigger("complete")}}},this);d.setRequestHeader("X-CSRFToken",Utilities.getCookie("csrftoken"));return d.send(b)},replaceAsset:function(c,b){return $.post(replaceURL,{existing_asset_id:c,new_asset_id:b},a(function(d){if(d.response==="OK"){return this.trigger("replaceComplete")}else{return this.trigger("replaceError")}},this))}})}).call(this);